import java.util.Random;
import java.util.Scanner;

public class GlucoseV2 {
    private float battery_health = 9;
    private float insulin_volume = 10;

    private int front, rear, runs = 0;

    public int generate_glucose(int rand_number) {
        battery_health -= 0.25;

        if (runs == 0) {
            front = rand_number;
        } else {
            rear = front;
            front = rand_number;
        }

        runs++;

        return front;
    }

    public String display_glucose() {
        return "Front: " + front + "\nRear: " + rear;
    }

    public int generate_slope() {
        return (front - rear) / 10;
    }

    public void inject_insulin() {
        System.out.println("Injecting Insulin");

        battery_health -= 0.5;
        insulin_volume -= 0.5;

        System.out.println("Battery Health: " + check_battery());
        System.out.println("Insulin Volume: " + check_insulin());
    }

    public float check_battery() {
        battery_health = battery_health < 1.35 ? 9 : battery_health;
        return battery_health;
    }

    public float check_insulin() {
        insulin_volume = insulin_volume < 1.5 ? 10 : insulin_volume;
        return insulin_volume;
    }

    public static void main(String[] args) throws InterruptedException {
        Random rand = new Random();
        int program_runs = 0;

        GlucoseV2 monitor = new GlucoseV2();

        // Scanner keyboard = new Scanner(System.in);

        // System.out.print("\nHow many times would you like to run this program? ");
        // int runs = keyboard.nextInt();

        do {
            int rand_number = rand.nextInt(200);
            int glucose_level = monitor.generate_glucose(rand_number);
            int current_slope = monitor.generate_slope();

            System.out.println("\nSlope:" + monitor.generate_slope());
            System.out.println("Glucose level: " + glucose_level);

            if (glucose_level < 100) { // unsafe area
                System.out.println("GET HELP!!");
            } else if (glucose_level >= 100 && glucose_level < 120) { // safe area
                System.out.println("Monitoring...");
            } else { // undesirable area
                if (current_slope >= 0 || (current_slope > -5 && current_slope < 0))
                    monitor.inject_insulin();
            }

            monitor.display_glucose();
            Thread.sleep(2000);

            program_runs++;
        } while (program_runs != 5);

    }
}